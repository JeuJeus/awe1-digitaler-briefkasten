<!DOCTYPE html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="utf-8"/>
<head>
    <title>All ideas</title>

    <link rel="stylesheet" type="text/css" th:href="@{/css/common.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}"/>
    <script src="https://kit.fontawesome.com/b56d194d75.js" crossorigin="anonymous"></script>
    <style>
        th {
            white-space: nowrap;
        }

        .my-custom-scrollbar {
            position: relative;
            max-height: 40vh;
            overflow: auto;
        }

        .table-wrapper-scroll-y {
            display: block;
        }

        .caption {
            caption-side: top;
            margin-left: 0.5rem;
        }

        .dblFontSize {
            font-size: 2rem;
        }
    </style>
</head>
<body>
<script type="text/javascript" th:src="@{/js/UIHelper.js}"></script>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="/">
        <img src="/images/logo.png" width="30" height="30" class="d-inline-block align-top" alt="">
        Briefkasten</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="/">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/createIdea">Create Idea</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="/ideas">List Ideas</a>
            </li>
        </ul>
    </div>
</nav>

<main role="main" class="container">
    <p class="ml-0 mt-5 pt-1 border-top caption"><i class="mr-3 dblFontSize far fa-sticky-note"></i>Not submitted Ideas
    </p>
    <div class="table-wrapper-scroll-y my-custom-scrollbar">
        <table class="table table-striped table-bordered table-hover">
            <thead>
            <tr>
                <th scope="col">title</th>
                <th scope="col">description</th>
                <th scope="col">creator</th>
                <th scope="col">creation date</th>
                <th scope="col">status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="idea: ${notSubmittedIdeas}">
                <td th:utext="${idea.getTitle()}"></td>
                <td th:utext="${idea.getDescription()}"></td>
                <td><a href="#" th:utext="${idea.getCreator().getUsername()}"></a></td>
                <td th:utext="${idea.getCreationDate()}"></td>
                <td><span th:attr="data-status=${idea.getStatus()}" class="statusIcon mr-1"></span>
                    <span th:utext="${#strings.replace(#strings.toLowerCase(idea.getStatus()), '_', ' ')}"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <p class="mt-5 pt-1 ml-0 border-top caption"><i class="mr-3 dblFontSize far fa-lightbulb"></i>Product-Ideas</p>
    <div class="table-wrapper-scroll-y my-custom-scrollbar">
        <table class="table table-striped table-bordered table-hover">
            <thead>
            <tr>
                <th scope="col">title</th>
                <th scope="col">description</th>
                <th scope="col">creator</th>
                <th scope="col">creation date</th>
                <th scope="col">status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="idea: ${ideas}">
                <td th:utext="${idea.getTitle()}"></td>
                <td th:utext="${idea.getDescription()}"></td>
                <td><a href="#" th:utext="${idea.getCreator().getUsername()}"></a></td>
                <td th:utext="${idea.getCreationDate()}"></td>
                <td><span th:attr="data-status=${idea.getStatus()}" class="statusIcon mr-1"></span>
                    <span th:utext="${#strings.replace(#strings.toLowerCase(idea.getStatus()), '_', ' ')}"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <p class="ml-0 mt-5 pt-1 border-top caption"><i class="mr-3 dblFontSize fas fa-sitemap"></i>Internal-Ideas</p>
    <div class="table-wrapper-scroll-y my-custom-scrollbar">
        <table class="table table-striped table-bordered table-hover">
            <thead>
            <tr>
                <th scope="col">title</th>
                <th scope="col">description</th>
                <th scope="col">creator</th>
                <th scope="col">creation date</th>
                <th scope="col">status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="idea: ${ideas}">
                <td th:utext="${idea.getTitle()}"></td>
                <td th:utext="${idea.getDescription()}"></td>
                <td><a href="#" th:utext="${idea.getCreator().getUsername()}"></a></td>
                <td th:utext="${idea.getCreationDate()}"></td>
                <td><span th:attr="data-status=${idea.getStatus()}" class="statusIcon mr-1"></span>
                    <span th:utext="${#strings.replace(#strings.toLowerCase(idea.getStatus()), '_', ' ')}"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</main>


<script type="text/javascript">
    function insertSVG(element, status) {
        element.innerHTML = getStatusIcon(element.getAttribute('data-status'));
    }

    function setSVGColor(element, status) {
        statusIcon.querySelector("svg").style.color = getStatusIconColor(element.getAttribute('data-status'));
    }

    window.onload = function () {
        let statusIcons = document.querySelectorAll(".statusIcon");
        for (let i = 0; i < statusIcons.length; i++) {
            statusIcon = statusIcons[i];
            dataStatus = statusIcon.getAttribute('data-status');
            insertSVG(statusIcon, dataStatus);
            setSVGColor(statusIcon, dataStatus);
        }
    };

</script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>

</body>
</html>